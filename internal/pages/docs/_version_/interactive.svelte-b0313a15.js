import{S as G,i as B,s as F,F as pe,e as p,w as S,k as j,c as w,a as b,x as T,d as h,m as z,b as v,L as H,g as k,J as g,y as $,M as K,G as we,H as be,I as Ie,q as y,o as E,B as C,r as J,N as ke,D as ee,O as ye,l as M,z as Ee,A as De,f as te,n as le,P as Ve,p as se,Q as Ae,R as Pe,v as ne,C as Se,T as Te,U as re,V as oe,W as $e,t as W,h as L,j as ie,X as ae,Y as ce,K as ue,Z as de,_ as Ce,$ as We,a0 as Le}from"../../../chunks/vendor-ec47df3e.js";import{b as qe}from"../../../chunks/paths-4b3c6e7e.js";import{D as Oe,c as je,a as fe,b as ze,d as He,e as me,T as he,C as Ne,H as Re,f as Je,g as Me}from"../../../chunks/documentloader-631ccb9e.js";function Ue(i){let e,l,t,s,n,o,r,f,d;t=new Oe({props:{title:i[3]}});const a=i[7].default,c=pe(a,i,i[6],null);return{c(){e=p("div"),l=p("div"),S(t.$$.fragment),s=j(),n=p("div"),c&&c.c(),this.h()},l(u){e=w(u,"DIV",{class:!0,style:!0});var m=b(e);l=w(m,"DIV",{class:!0});var A=b(l);T(t.$$.fragment,A),A.forEach(h),s=z(m),n=w(m,"DIV",{class:!0,style:!0});var V=b(n);c&&c.l(V),V.forEach(h),m.forEach(h),this.h()},h(){v(l,"class","titlebar svelte-1tg6it9"),H(l,"collapsed",!i[2]),v(n,"class","document d svelte-1tg6it9"),v(n,"style",o=i[2]?"opacity: 0;":"opacity: 1;"),v(e,"class","viewer v svelte-1tg6it9"),v(e,"style",i[4]),H(e,"overlapped",i[1]),H(e,"collapsed",i[2])},m(u,m){k(u,e,m),g(e,l),$(t,l,null),g(e,s),g(e,n),c&&c.m(n,null),r=!0,f||(d=K(l,"click",i[8]),f=!0)},p(u,[m]){const A={};m&8&&(A.title=u[3]),t.$set(A),m&4&&H(l,"collapsed",!u[2]),c&&c.p&&(!r||m&64)&&we(c,a,u,u[6],r?Ie(a,u[6],m,null):be(u[6]),null),(!r||m&4&&o!==(o=u[2]?"opacity: 0;":"opacity: 1;"))&&v(n,"style",o),(!r||m&16)&&v(e,"style",u[4]),m&2&&H(e,"overlapped",u[1]),m&4&&H(e,"collapsed",u[2])},i(u){r||(y(t.$$.fragment,u),y(c,u),r=!0)},o(u){E(t.$$.fragment,u),E(c,u),r=!1},d(u){u&&h(e),C(t),c&&c.d(u),f=!1,d()}}}function Ge(i,e,l){let{$$slots:t={},$$scope:s}=e,{column:n=0}=e,{overlapped:o=!1}=e,{collapsed:r=!1}=e,{title:f}=e,{style:d}=e;J(je,n);const a=ke(fe),c=u=>a.scrollTo(n);return i.$$set=u=>{"column"in u&&l(0,n=u.column),"overlapped"in u&&l(1,o=u.overlapped),"collapsed"in u&&l(2,r=u.collapsed),"title"in u&&l(3,f=u.title),"style"in u&&l(4,d=u.style),"$$scope"in u&&l(6,s=u.$$scope)},[n,o,r,f,d,a,s,t,c]}class Be extends G{constructor(e){super();B(this,e,Ge,Ue,F,{column:0,overlapped:1,collapsed:2,title:3,style:4})}}class Fe{constructor(e,l){this.viewerWidth=650,this.elemAttrs=ee({scroll:0,size:2*this.viewerWidth}),this.documentIds=ee(e),this.viewerWidth=l,this.viewerProps=this.makeViewerPropsStore()}connect(e){this.elem=e,this.updateElemAttrs()}updateElemAttrs(){this.elemAttrs.set({scroll:this.elem.scrollLeft,size:this.elem.clientWidth})}openDocument(e,l,t=!1){this.documentIds.update(s=>s.includes(e)?s:[...s.slice(0,l),e,...t?s.slice(l):[]])}scrollToDocument(e){this.documentIds.update(l=>{if(l.includes(e)){const t=l.findIndex(s=>s==e);this.scrollTo(t)}return l})}closeDocument(e){this.documentIds.update(l=>{if(l.includes(e)){const t=l.findIndex(s=>s==e);return[...l.slice(0,t),...l.slice(t+1)]}return l})}scrollTo(e){this.elem.scrollTo({left:e*this.viewerWidth+e*40})}makeViewerPropsStore(){return ye([this.elemAttrs,this.documentIds],([{scroll:e,size:l},t])=>{const s=this.viewerWidth,n=t.length,o=40;return t.map((r,f)=>{const d=ze(f,s,l,e);return{style:`width: ${s}px; max-width: ${s}px; left:${f*o}px ;right:${-s+o*(n-f)}px;`,documentId:r,overlapped:d<s,collapsed:d<=2*o,column:f}})})}}function _e(i,e,l){const t=i.slice();t[10]=e[l],t[14]=l;const s=t[10].documentId;t[11]=s;const n=t[1].getTitle(t[11]);return t[12]=n,t}function Ke(i){let e,l,t,s={ctx:i,current:null,token:null,hasCatch:!0,pending:xe,then:Ze,catch:Xe,value:15,error:16,blocks:[,,,]};return oe(l=i[1].load(i[11]),s),{c(){e=M(),s.block.c()},l(n){e=M(),s.block.l(n)},m(n,o){k(n,e,o),s.block.m(n,s.anchor=o),s.mount=()=>e.parentNode,s.anchor=e,t=!0},p(n,o){i=n,s.ctx=i,o&18&&l!==(l=i[1].load(i[11]))&&oe(l,s)||$e(s,i,o)},i(n){t||(y(s.block),t=!0)},o(n){for(let o=0;o<3;o+=1){const r=s.blocks[o];E(r)}t=!1},d(n){n&&h(e),s.block.d(n),s.token=null,s=null}}}function Qe(i){let e,l;return e=new me({props:{views:he,document:i[1].get(i[11])}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,s){$(e,t,s),l=!0},p(t,s){const n={};s&18&&(n.document=t[1].get(t[11])),e.$set(n)},i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){E(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function Xe(i){let e,l,t,s;return t=new Ne({props:{$$slots:{default:[Ye]},$$scope:{ctx:i}}}),{c(){e=p("p"),l=W("An error occured while loading this document: "),S(t.$$.fragment)},l(n){e=w(n,"P",{});var o=b(e);l=L(o,"An error occured while loading this document: "),T(t.$$.fragment,o),o.forEach(h)},m(n,o){k(n,e,o),g(e,l),$(t,e,null),s=!0},p(n,o){const r={};o&131090&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){s||(y(t.$$.fragment,n),s=!0)},o(n){E(t.$$.fragment,n),s=!1},d(n){n&&h(e),C(t)}}}function Ye(i){let e=i[11]+"",l,t,s=JSON.stringify(i[16])+"",n;return{c(){l=W(e),t=W(", "),n=W(s)},l(o){l=L(o,e),t=L(o,", "),n=L(o,s)},m(o,r){k(o,l,r),k(o,t,r),k(o,n,r)},p(o,r){r&16&&e!==(e=o[11]+"")&&ie(l,e),r&18&&s!==(s=JSON.stringify(o[16])+"")&&ie(n,s)},d(o){o&&h(l),o&&h(t),o&&h(n)}}}function Ze(i){let e,l,t,s;return l=new me({props:{document:i[15],views:he}}),{c(){e=p("div"),S(l.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var o=b(e);T(l.$$.fragment,o),o.forEach(h),this.h()},h(){v(e,"class","loadeddocument")},m(n,o){k(n,e,o),$(l,e,null),s=!0},p(n,o){const r={};o&18&&(r.document=n[15]),l.$set(r)},i(n){s||(y(l.$$.fragment,n),t||ae(()=>{t=ce(e,de,{duration:80}),t.start()}),s=!0)},o(n){E(l.$$.fragment,n),s=!1},d(n){n&&h(e),C(l)}}}function xe(i){let e,l,t;return{c(){e=p("p"),l=W("Loading")},l(s){e=w(s,"P",{});var n=b(e);l=L(n,"Loading"),n.forEach(h)},m(s,n){k(s,e,n),g(e,l)},p:ue,i(s){t||ae(()=>{t=ce(e,de,{duration:2e3}),t.start()})},o:ue,d(s){s&&h(e)}}}function et(i){let e,l,t,s,n;const o=[Qe,Ke],r=[];function f(d,a){return a&18&&(e=null),e==null&&(e=!!d[1].hasDocument(d[11])),e?0:1}return l=f(i,-1),t=r[l]=o[l](i),{c(){t.c(),s=j()},l(d){t.l(d),s=z(d)},m(d,a){r[l].m(d,a),k(d,s,a),n=!0},p(d,a){let c=l;l=f(d,a),l===c?r[l].p(d,a):(le(),E(r[c],1,1,()=>{r[c]=null}),se(),t=r[l],t?t.p(d,a):(t=r[l]=o[l](d),t.c()),y(t,1),t.m(s.parentNode,s))},i(d){n||(y(t),n=!0)},o(d){E(t),n=!1},d(d){r[l].d(d),d&&h(s)}}}function ve(i,e){let l,t,s;const n=[e[10],{title:e[12]}];let o={$$slots:{default:[et]},$$scope:{ctx:e}};for(let r=0;r<n.length;r+=1)o=Se(o,n[r]);return t=new Be({props:o}),{key:i,first:null,c(){l=M(),S(t.$$.fragment),this.h()},l(r){l=M(),T(t.$$.fragment,r),this.h()},h(){this.first=l},m(r,f){k(r,l,f),$(t,r,f),s=!0},p(r,f){e=r;const d=f&18?Ee(n,[f&16&&De(e[10]),{title:e[12]}]):{};f&131090&&(d.$$scope={dirty:f,ctx:e}),t.$set(d)},i(r){s||(y(t.$$.fragment,r),s=!0)},o(r){E(t.$$.fragment,r),s=!1},d(r){r&&h(l),C(t,r)}}}function tt(i){let e,l,t=[],s=new Map,n,o,r,f=i[4];const d=a=>a[10].documentId;for(let a=0;a<f.length;a+=1){let c=_e(i,f,a),u=d(c);s.set(u,t[a]=ve(u,c))}return{c(){e=p("div"),l=p("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var c=b(e);l=w(c,"DIV",{class:!0,style:!0});var u=b(l);for(let m=0;m<t.length;m+=1)t[m].l(u);u.forEach(h),c.forEach(h),this.h()},h(){v(l,"class","inner viewers svelte-fi98vs"),te(l,"width",i[0]*i[4].length+"px"),v(e,"class","outer svelte-fi98vs")},m(a,c){k(a,e,c),g(e,l);for(let u=0;u<t.length;u+=1)t[u].m(l,null);i[9](e),n=!0,o||(r=[K(window,"resize",i[7]),K(e,"scroll",i[8])],o=!0)},p(a,[c]){c&18&&(f=a[4],le(),t=Ve(t,c,d,1,a,f,s,l,Te,ve,null,_e),se()),(!n||c&17)&&te(l,"width",a[0]*a[4].length+"px")},i(a){if(!n){for(let c=0;c<f.length;c+=1)y(t[c]);n=!0}},o(a){for(let c=0;c<t.length;c+=1)E(t[c]);n=!1},d(a){a&&h(e);for(let c=0;c<t.length;c+=1)t[c].d();i[9](null),o=!1,Ae(r)}}}function lt(i,e,l){let t,{documentIds:s=[]}=e,{viewerwidth:n=700}=e,{loader:o}=e;const r=new Fe(s,n),f=r.viewerProps;Pe(i,f,m=>l(4,t=m)),J(fe,r),J(He,!0);let d;ne(()=>{r.connect(d)});const a=m=>r.updateElemAttrs(),c=m=>r.updateElemAttrs();function u(m){re[m?"unshift":"push"](()=>{d=m,l(3,d)})}return i.$$set=m=>{"documentIds"in m&&l(6,s=m.documentIds),"viewerwidth"in m&&l(0,n=m.viewerwidth),"loader"in m&&l(1,o=m.loader)},[n,o,r,d,t,f,s,a,c,u]}class st extends G{constructor(e){super();B(this,e,lt,tt,F,{documentIds:6,viewerwidth:0,loader:1,viewcontrol:2})}get viewcontrol(){return this.$$.ctx[2]}}function nt(i){if(window&&history){const e=new URLSearchParams;i.forEach(t=>{e.append("id",t)});const l=i.length>0?"?"+e.toString():"";history.pushState(null,"",l)}}function rt(i){let e,l,t,s,n,o,r,f,d,a,c,u,m,A,V,q,U,N,O;document.title=e=i[2].title,s=new Re({props:{viewcontrol:i[4],loader:i[1],isInteractive:!0,documentId:i[3][0]}}),s.$on("resultSelected",i[5]);function ge(_){i[6](_)}let Q={documentIds:i[0],loader:i[1],viewerwidth:i[2].columnWidth};return i[4]!==void 0&&(Q.viewcontrol=i[4]),r=new st({props:Q}),re.push(()=>Ce(r,"viewcontrol",ge)),{c(){l=j(),t=p("div"),S(s.$$.fragment),n=j(),o=p("div"),S(r.$$.fragment),d=j(),a=p("div"),c=p("div"),u=p("p"),m=W("On a small screen, we recommend using the single-page viewer."),A=j(),V=p("a"),q=p("div"),U=W("Open in single-page viewer"),this.h()},l(_){We('[data-svelte="svelte-fbczdu"]',document.head).forEach(h),l=z(_),t=w(_,"DIV",{class:!0});var D=b(t);T(s.$$.fragment,D),n=z(D),o=w(D,"DIV",{class:!0});var P=b(o);T(r.$$.fragment,P),P.forEach(h),d=z(D),a=w(D,"DIV",{class:!0});var X=b(a);c=w(X,"DIV",{class:!0});var R=b(c);u=w(R,"P",{class:!0});var Y=b(u);m=L(Y,"On a small screen, we recommend using the single-page viewer."),Y.forEach(h),A=z(R),V=w(R,"A",{href:!0});var Z=b(V);q=w(Z,"DIV",{class:!0});var x=b(q);U=L(x,"Open in single-page viewer"),x.forEach(h),Z.forEach(h),R.forEach(h),X.forEach(h),D.forEach(h),this.h()},h(){v(o,"class","interactive flex-grow items-stretch overflow-auto hidden md:flex"),v(u,"class","text-center text-gray-700"),v(q,"class","border-bluegray-200 text-bluegray-500 items-stretch grow bg-bluegray-100 border-2 p-1 rounded-lg text-center mt-8 hover:border-bluegray-300 hover:text-bluegray-700 hover:bg-bluegray-200"),v(V,"href",N=i[1].getHref(i[3][0])),v(c,"class","max-w-sm m-auto mt-10"),v(a,"class","flex md:hidden items-center"),v(t,"class","flex flex-col lg:flex-row max-w-full wrapper svelte-j761q5")},m(_,I){k(_,l,I),k(_,t,I),$(s,t,null),g(t,n),g(t,o),$(r,o,null),g(t,d),g(t,a),g(a,c),g(c,u),g(u,m),g(c,A),g(c,V),g(V,q),g(q,U),O=!0},p(_,[I]){(!O||I&4)&&e!==(e=_[2].title)&&(document.title=e);const D={};I&16&&(D.viewcontrol=_[4]),I&2&&(D.loader=_[1]),I&8&&(D.documentId=_[3][0]),s.$set(D);const P={};I&1&&(P.documentIds=_[0]),I&2&&(P.loader=_[1]),I&4&&(P.viewerwidth=_[2].columnWidth),!f&&I&16&&(f=!0,P.viewcontrol=_[4],Le(()=>f=!1)),r.$set(P),(!O||I&10&&N!==(N=_[1].getHref(_[3][0])))&&v(V,"href",N)},i(_){O||(y(s.$$.fragment,_),y(r.$$.fragment,_),O=!0)},o(_){E(s.$$.fragment,_),E(r.$$.fragment,_),O=!1},d(_){_&&h(l),_&&h(t),C(s),C(r)}}}const ut=!0;async function dt({fetch:i,params:e}){console.log("Rendering INTERACTIVE");const{version:l}=e,t=[],s=new Je(qe,l);s.fetch=i,s.attributes=await s.load("attributes");const n=await s.load("config");return{props:{loader:s,documentIds:t,config:n}}}function ot(i,e,l){let{documentIds:t}=e,{loader:s}=e,{config:n}=e;J(Me,s);let o=[n.defaultDocument],r;ne(()=>{let c=new URLSearchParams(window.location.search).getAll("id");l(3,o=c.length>0?c:o),r.documentIds.set(o),r.documentIds.subscribe(nt)});function f({detail:a}){r.documentIds.set([a])}function d(a){r=a,l(4,r)}return i.$$set=a=>{"documentIds"in a&&l(0,t=a.documentIds),"loader"in a&&l(1,s=a.loader),"config"in a&&l(2,n=a.config)},[t,s,n,o,r,f,d]}class ft extends G{constructor(e){super();B(this,e,ot,rt,F,{documentIds:0,loader:1,config:2})}}export{ft as default,dt as load,ut as prerender};

import{S as G,i as U,s as B,F as we,e as p,w as $,k as H,c as w,a as b,x as P,d as _,m as L,b as v,P as N,g as I,J as g,y as S,Q as K,G as be,H as Ie,I as ke,q as k,o as y,B as C,r as J,N as ye,D as ee,Z as Ee,l as M,z as De,A as Ve,f as te,n as le,_ as Ae,p as se,$ as Te,O as $e,v as ne,C as Pe,a0 as Se,a1 as re,a2 as oe,a3 as Ce,t as O,h as W,j as ae,a4 as ie,a5 as ce,K as ue,a6 as de,a7 as Oe,a8 as We,a9 as je}from"../../../chunks/vendor-f09d08fb.js";import{b as qe}from"../../../chunks/paths-4b3c6e7e.js";import{c as He,a as fe,b as Le,d as Ne,I as he,C as ze,D as Re,R as _e,V as Je,e as Me}from"../../../chunks/config-b1d5381c.js";import{D as Fe,a as me,H as Ge,b as Ue}from"../../../chunks/documentloader-34d8dc7d.js";function Be(a){let e,l,t,s,n,r,o,f,u;t=new Fe({props:{title:a[3]}});const d=a[7].default,c=we(d,a,a[6],null);return{c(){e=p("div"),l=p("div"),$(t.$$.fragment),s=H(),n=p("div"),c&&c.c(),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var h=b(e);l=w(h,"DIV",{class:!0});var A=b(l);P(t.$$.fragment,A),A.forEach(_),s=L(h),n=w(h,"DIV",{class:!0,style:!0});var D=b(n);c&&c.l(D),D.forEach(_),h.forEach(_),this.h()},h(){v(l,"class","titlebar svelte-1tg6it9"),N(l,"collapsed",!a[2]),v(n,"class","document d svelte-1tg6it9"),v(n,"style",r=a[2]?"opacity: 0;":"opacity: 1;"),v(e,"class","viewer v svelte-1tg6it9"),v(e,"style",a[4]),N(e,"overlapped",a[1]),N(e,"collapsed",a[2])},m(i,h){I(i,e,h),g(e,l),S(t,l,null),g(e,s),g(e,n),c&&c.m(n,null),o=!0,f||(u=K(l,"click",a[8]),f=!0)},p(i,[h]){const A={};h&8&&(A.title=i[3]),t.$set(A),h&4&&N(l,"collapsed",!i[2]),c&&c.p&&(!o||h&64)&&be(c,d,i,i[6],o?ke(d,i[6],h,null):Ie(i[6]),null),(!o||h&4&&r!==(r=i[2]?"opacity: 0;":"opacity: 1;"))&&v(n,"style",r),(!o||h&16)&&v(e,"style",i[4]),h&2&&N(e,"overlapped",i[1]),h&4&&N(e,"collapsed",i[2])},i(i){o||(k(t.$$.fragment,i),k(c,i),o=!0)},o(i){y(t.$$.fragment,i),y(c,i),o=!1},d(i){i&&_(e),C(t),c&&c.d(i),f=!1,u()}}}function Ke(a,e,l){let{$$slots:t={},$$scope:s}=e,{column:n=0}=e,{overlapped:r=!1}=e,{collapsed:o=!1}=e,{title:f}=e,{style:u}=e;J(He,n);const d=ye(fe),c=i=>d.scrollTo(n);return a.$$set=i=>{"column"in i&&l(0,n=i.column),"overlapped"in i&&l(1,r=i.overlapped),"collapsed"in i&&l(2,o=i.collapsed),"title"in i&&l(3,f=i.title),"style"in i&&l(4,u=i.style),"$$scope"in i&&l(6,s=i.$$scope)},[n,r,o,f,u,d,s,t,c]}class Qe extends G{constructor(e){super();U(this,e,Ke,Be,B,{column:0,overlapped:1,collapsed:2,title:3,style:4})}}class Ze{constructor(e,l){this.viewerWidth=650,this.elemAttrs=ee({scroll:0,size:2*this.viewerWidth}),this.documentIds=ee(e),this.viewerWidth=l,this.viewerProps=this.makeViewerPropsStore()}connect(e){this.elem=e,this.updateElemAttrs()}updateElemAttrs(){this.elemAttrs.set({scroll:this.elem.scrollLeft,size:this.elem.clientWidth})}openDocument(e,l,t=!1){this.documentIds.update(s=>s.includes(e)?s:[...s.slice(0,l),e,...t?s.slice(l):[]])}scrollToDocument(e){this.documentIds.update(l=>{if(l.includes(e)){const t=l.findIndex(s=>s==e);this.scrollTo(t)}return l})}closeDocument(e){this.documentIds.update(l=>{if(l.includes(e)){const t=l.findIndex(s=>s==e);return[...l.slice(0,t),...l.slice(t+1)]}return l})}scrollTo(e){this.elem.scrollTo({left:e*this.viewerWidth+e*40})}makeViewerPropsStore(){return Ee([this.elemAttrs,this.documentIds],([{scroll:e,size:l},t])=>{const s=this.viewerWidth,n=t.length,r=40;return t.map((o,f)=>{const u=Le(f,s,l,e);return{style:`width: ${s}px; max-width: ${s}px; left:${f*r}px ;right:${-s+r*(n-f)}px;`,documentId:o,overlapped:u<s,collapsed:u<=2*r,column:f}})})}}function ve(a,e,l){const t=a.slice();t[10]=e[l],t[14]=l;const s=t[10].documentId;t[11]=s;const n=t[1].getTitle(t[11]);return t[12]=n,t}function Xe(a){let e,l,t,s={ctx:a,current:null,token:null,hasCatch:!0,pending:lt,then:tt,catch:xe,value:15,error:16,blocks:[,,,]};return oe(l=a[1].load(a[11]),s),{c(){e=M(),s.block.c()},l(n){e=M(),s.block.l(n)},m(n,r){I(n,e,r),s.block.m(n,s.anchor=r),s.mount=()=>e.parentNode,s.anchor=e,t=!0},p(n,r){a=n,s.ctx=a,r&18&&l!==(l=a[1].load(a[11]))&&oe(l,s)||Ce(s,a,r)},i(n){t||(k(s.block),t=!0)},o(n){for(let r=0;r<3;r+=1){const o=s.blocks[r];y(o)}t=!1},d(n){n&&_(e),s.block.d(n),s.token=null,s=null}}}function Ye(a){let e,l;return e=new me({props:{views:he,document:a[1].get(a[11])}}),{c(){$(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,s){S(e,t,s),l=!0},p(t,s){const n={};s&18&&(n.document=t[1].get(t[11])),e.$set(n)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function xe(a){let e,l,t,s;return t=new ze({props:{$$slots:{default:[et]},$$scope:{ctx:a}}}),{c(){e=p("p"),l=O("An error occured while loading this document: "),$(t.$$.fragment)},l(n){e=w(n,"P",{});var r=b(e);l=W(r,"An error occured while loading this document: "),P(t.$$.fragment,r),r.forEach(_)},m(n,r){I(n,e,r),g(e,l),S(t,e,null),s=!0},p(n,r){const o={};r&131090&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i(n){s||(k(t.$$.fragment,n),s=!0)},o(n){y(t.$$.fragment,n),s=!1},d(n){n&&_(e),C(t)}}}function et(a){let e=a[11]+"",l,t,s=JSON.stringify(a[16])+"",n;return{c(){l=O(e),t=O(", "),n=O(s)},l(r){l=W(r,e),t=W(r,", "),n=W(r,s)},m(r,o){I(r,l,o),I(r,t,o),I(r,n,o)},p(r,o){o&16&&e!==(e=r[11]+"")&&ae(l,e),o&18&&s!==(s=JSON.stringify(r[16])+"")&&ae(n,s)},d(r){r&&_(l),r&&_(t),r&&_(n)}}}function tt(a){let e,l,t,s;return l=new me({props:{document:a[15],views:he}}),{c(){e=p("div"),$(l.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=b(e);P(l.$$.fragment,r),r.forEach(_),this.h()},h(){v(e,"class","loadeddocument")},m(n,r){I(n,e,r),S(l,e,null),s=!0},p(n,r){const o={};r&18&&(o.document=n[15]),l.$set(o)},i(n){s||(k(l.$$.fragment,n),t||ie(()=>{t=ce(e,de,{duration:80}),t.start()}),s=!0)},o(n){y(l.$$.fragment,n),s=!1},d(n){n&&_(e),C(l)}}}function lt(a){let e,l,t;return{c(){e=p("p"),l=O("Loading")},l(s){e=w(s,"P",{});var n=b(e);l=W(n,"Loading"),n.forEach(_)},m(s,n){I(s,e,n),g(e,l)},p:ue,i(s){t||ie(()=>{t=ce(e,de,{duration:2e3}),t.start()})},o:ue,d(s){s&&_(e)}}}function st(a){let e,l,t,s,n;const r=[Ye,Xe],o=[];function f(u,d){return d&18&&(e=null),e==null&&(e=!!u[1].hasDocument(u[11])),e?0:1}return l=f(a,-1),t=o[l]=r[l](a),{c(){t.c(),s=H()},l(u){t.l(u),s=L(u)},m(u,d){o[l].m(u,d),I(u,s,d),n=!0},p(u,d){let c=l;l=f(u,d),l===c?o[l].p(u,d):(le(),y(o[c],1,1,()=>{o[c]=null}),se(),t=o[l],t?t.p(u,d):(t=o[l]=r[l](u),t.c()),k(t,1),t.m(s.parentNode,s))},i(u){n||(k(t),n=!0)},o(u){y(t),n=!1},d(u){o[l].d(u),u&&_(s)}}}function ge(a,e){let l,t,s;const n=[e[10],{title:e[12]}];let r={$$slots:{default:[st]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)r=Pe(r,n[o]);return t=new Qe({props:r}),{key:a,first:null,c(){l=M(),$(t.$$.fragment),this.h()},l(o){l=M(),P(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,f){I(o,l,f),S(t,o,f),s=!0},p(o,f){e=o;const u=f&18?De(n,[f&16&&Ve(e[10]),{title:e[12]}]):{};f&131090&&(u.$$scope={dirty:f,ctx:e}),t.$set(u)},i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){y(t.$$.fragment,o),s=!1},d(o){o&&_(l),C(t,o)}}}function nt(a){let e,l,t=[],s=new Map,n,r,o,f=a[4];const u=d=>d[10].documentId;for(let d=0;d<f.length;d+=1){let c=ve(a,f,d),i=u(c);s.set(i,t[d]=ge(i,c))}return{c(){e=p("div"),l=p("div");for(let d=0;d<t.length;d+=1)t[d].c();this.h()},l(d){e=w(d,"DIV",{class:!0});var c=b(e);l=w(c,"DIV",{class:!0,style:!0});var i=b(l);for(let h=0;h<t.length;h+=1)t[h].l(i);i.forEach(_),c.forEach(_),this.h()},h(){v(l,"class","inner viewers svelte-fi98vs"),te(l,"width",a[0]*a[4].length+"px"),v(e,"class","outer svelte-fi98vs")},m(d,c){I(d,e,c),g(e,l);for(let i=0;i<t.length;i+=1)t[i].m(l,null);a[9](e),n=!0,r||(o=[K(window,"resize",a[7]),K(e,"scroll",a[8])],r=!0)},p(d,[c]){c&18&&(f=d[4],le(),t=Ae(t,c,u,1,d,f,s,l,Se,ge,null,ve),se()),(!n||c&17)&&te(l,"width",d[0]*d[4].length+"px")},i(d){if(!n){for(let c=0;c<f.length;c+=1)k(t[c]);n=!0}},o(d){for(let c=0;c<t.length;c+=1)y(t[c]);n=!1},d(d){d&&_(e);for(let c=0;c<t.length;c+=1)t[c].d();a[9](null),r=!1,Te(o)}}}function rt(a,e,l){let t,{documentIds:s=[]}=e,{viewerwidth:n=700}=e,{loader:r}=e;const o=new Ze(s,n),f=o.viewerProps;$e(a,f,h=>l(4,t=h)),J(fe,o),J(Ne,!0);let u;ne(()=>{o.connect(u)});const d=h=>o.updateElemAttrs(),c=h=>o.updateElemAttrs();function i(h){re[h?"unshift":"push"](()=>{u=h,l(3,u)})}return a.$$set=h=>{"documentIds"in h&&l(6,s=h.documentIds),"viewerwidth"in h&&l(0,n=h.viewerwidth),"loader"in h&&l(1,r=h.loader)},[n,r,o,u,t,f,s,d,c,i]}class ot extends G{constructor(e){super();U(this,e,rt,nt,B,{documentIds:6,viewerwidth:0,loader:1,viewcontrol:2})}get viewcontrol(){return this.$$.ctx[2]}}function at(a){if(window&&history){const e=new URLSearchParams;a.forEach(t=>{e.append("id",t)});const l=a.length>0?"?"+e.toString():"";history.pushState(null,"",l)}}function it(a){let e,l,t,s,n,r,o,f,u,d,c,i,h,A,D,j,F,z,q;document.title=e=_e,s=new Ge({props:{viewcontrol:a[2],loader:a[1],isInteractive:!0}}),s.$on("resultSelected",a[3]);function pe(m){a[5](m)}let Q={documentIds:a[0],loader:a[1],viewerwidth:Je};return a[2]!==void 0&&(Q.viewcontrol=a[2]),o=new ot({props:Q}),re.push(()=>Oe(o,"viewcontrol",pe)),{c(){l=H(),t=p("div"),$(s.$$.fragment),n=H(),r=p("div"),$(o.$$.fragment),u=H(),d=p("div"),c=p("div"),i=p("p"),h=O("On a small screen, we recommend using the single-page viewer."),A=H(),D=p("a"),j=p("div"),F=O("Open in single-page viewer"),this.h()},l(m){We('[data-svelte="svelte-8a7s9"]',document.head).forEach(_),l=L(m),t=w(m,"DIV",{class:!0});var V=b(t);P(s.$$.fragment,V),n=L(V),r=w(V,"DIV",{class:!0});var T=b(r);P(o.$$.fragment,T),T.forEach(_),u=L(V),d=w(V,"DIV",{class:!0});var Z=b(d);c=w(Z,"DIV",{class:!0});var R=b(c);i=w(R,"P",{class:!0});var X=b(i);h=W(X,"On a small screen, we recommend using the single-page viewer."),X.forEach(_),A=L(R),D=w(R,"A",{href:!0});var Y=b(D);j=w(Y,"DIV",{class:!0});var x=b(j);F=W(x,"Open in single-page viewer"),x.forEach(_),Y.forEach(_),R.forEach(_),Z.forEach(_),V.forEach(_),this.h()},h(){v(r,"class","interactive flex-grow items-stretch overflow-auto hidden md:flex"),v(i,"class","text-center text-gray-700"),v(j,"class","border-bluegray-200 text-bluegray-500 items-stretch grow bg-bluegray-100 border-2 p-1 rounded-lg text-center mt-8 hover:border-bluegray-300 hover:text-bluegray-700 hover:bg-bluegray-200"),v(D,"href",z=a[1].getHref(a[0][0])),v(c,"class","max-w-sm m-auto mt-10"),v(d,"class","flex md:hidden items-center"),v(t,"class","flex flex-col lg:flex-row max-w-full wrapper svelte-j761q5")},m(m,E){I(m,l,E),I(m,t,E),S(s,t,null),g(t,n),g(t,r),S(o,r,null),g(t,u),g(t,d),g(d,c),g(c,i),g(i,h),g(c,A),g(c,D),g(D,j),g(j,F),q=!0},p(m,[E]){(!q||E&0)&&e!==(e=_e)&&(document.title=e);const V={};E&4&&(V.viewcontrol=m[2]),E&2&&(V.loader=m[1]),s.$set(V);const T={};E&1&&(T.documentIds=m[0]),E&2&&(T.loader=m[1]),!f&&E&4&&(f=!0,T.viewcontrol=m[2],je(()=>f=!1)),o.$set(T),(!q||E&3&&z!==(z=m[1].getHref(m[0][0])))&&v(D,"href",z)},i(m){q||(k(s.$$.fragment,m),k(o.$$.fragment,m),q=!0)},o(m){y(s.$$.fragment,m),y(o.$$.fragment,m),q=!1},d(m){m&&_(l),m&&_(t),C(s),C(o)}}}const _t=!1;async function mt({url:a,fetch:e,params:l}){const{version:t}=l;let s=a.searchParams.getAll("id");s=s.length>0?s:[Re];const n=s[0],r=new Ue(qe,t);r.fetch=e,r.attributes=await r.load("attributes"),r.load("linktree");const o={loader:r,documentIds:s};return await r.load(n).then(f=>(o.error=null,{props:o})).catch(f=>(o.error=f,{props:o}))}function ct(a,e,l){let{documentIds:t}=e,{loader:s}=e,{error:n}=e;console.log(n),J(Me,s);let r;ne(()=>{r.documentIds.subscribe(at)});function o({detail:u}){r.documentIds.set([u])}function f(u){r=u,l(2,r)}return a.$$set=u=>{"documentIds"in u&&l(0,t=u.documentIds),"loader"in u&&l(1,s=u.loader),"error"in u&&l(4,n=u.error)},[t,s,r,o,n,f]}class vt extends G{constructor(e){super();U(this,e,ct,it,B,{documentIds:0,loader:1,error:4})}}export{vt as default,mt as load,_t as prerender};

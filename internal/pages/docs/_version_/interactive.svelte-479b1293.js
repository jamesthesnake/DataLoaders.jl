import{S as F,i as G,s as B,F as we,e as g,w as T,k as R,c as w,a as b,x as P,d as h,m as j,b as v,P as q,g as I,J as p,y as S,Q as K,G as be,H as Ie,I as ke,q as k,o as y,B as C,r as J,N as ye,D as ee,Z as Ee,l as M,z as De,A as Ve,f as te,n as le,_ as $e,p as se,$ as Ae,O as Te,v as ne,C as Pe,a0 as Se,a1 as re,a2 as oe,a3 as Ce,t as O,h as W,j as ae,a4 as ie,a5 as ce,K as ue,a6 as de,a7 as Oe,a8 as We,a9 as Le}from"../../../chunks/vendor-f09d08fb.js";import{b as Ne}from"../../../chunks/paths-4b3c6e7e.js";import{c as Re,a as fe,b as je,d as qe,I as me,C as He,R as he,V as ze,e as Je,D as Me}from"../../../chunks/config-b1d5381c.js";import{D as Ue,a as _e,H as Fe,b as Ge}from"../../../chunks/documentloader-e9d8d024.js";function Be(a){let e,l,t,s,n,o,r,f,d;t=new Ue({props:{title:a[3]}});const u=a[7].default,c=we(u,a,a[6],null);return{c(){e=g("div"),l=g("div"),T(t.$$.fragment),s=R(),n=g("div"),c&&c.c(),this.h()},l(i){e=w(i,"DIV",{class:!0,style:!0});var m=b(e);l=w(m,"DIV",{class:!0});var $=b(l);P(t.$$.fragment,$),$.forEach(h),s=j(m),n=w(m,"DIV",{class:!0,style:!0});var D=b(n);c&&c.l(D),D.forEach(h),m.forEach(h),this.h()},h(){v(l,"class","titlebar svelte-1tg6it9"),q(l,"collapsed",!a[2]),v(n,"class","document d svelte-1tg6it9"),v(n,"style",o=a[2]?"opacity: 0;":"opacity: 1;"),v(e,"class","viewer v svelte-1tg6it9"),v(e,"style",a[4]),q(e,"overlapped",a[1]),q(e,"collapsed",a[2])},m(i,m){I(i,e,m),p(e,l),S(t,l,null),p(e,s),p(e,n),c&&c.m(n,null),r=!0,f||(d=K(l,"click",a[8]),f=!0)},p(i,[m]){const $={};m&8&&($.title=i[3]),t.$set($),m&4&&q(l,"collapsed",!i[2]),c&&c.p&&(!r||m&64)&&be(c,u,i,i[6],r?ke(u,i[6],m,null):Ie(i[6]),null),(!r||m&4&&o!==(o=i[2]?"opacity: 0;":"opacity: 1;"))&&v(n,"style",o),(!r||m&16)&&v(e,"style",i[4]),m&2&&q(e,"overlapped",i[1]),m&4&&q(e,"collapsed",i[2])},i(i){r||(k(t.$$.fragment,i),k(c,i),r=!0)},o(i){y(t.$$.fragment,i),y(c,i),r=!1},d(i){i&&h(e),C(t),c&&c.d(i),f=!1,d()}}}function Ke(a,e,l){let{$$slots:t={},$$scope:s}=e,{column:n=0}=e,{overlapped:o=!1}=e,{collapsed:r=!1}=e,{title:f}=e,{style:d}=e;J(Re,n);const u=ye(fe),c=i=>u.scrollTo(n);return a.$$set=i=>{"column"in i&&l(0,n=i.column),"overlapped"in i&&l(1,o=i.overlapped),"collapsed"in i&&l(2,r=i.collapsed),"title"in i&&l(3,f=i.title),"style"in i&&l(4,d=i.style),"$$scope"in i&&l(6,s=i.$$scope)},[n,o,r,f,d,u,s,t,c]}class Qe extends F{constructor(e){super();G(this,e,Ke,Be,B,{column:0,overlapped:1,collapsed:2,title:3,style:4})}}class Ze{constructor(e,l){this.viewerWidth=650,this.elemAttrs=ee({scroll:0,size:2*this.viewerWidth}),this.documentIds=ee(e),this.viewerWidth=l,this.viewerProps=this.makeViewerPropsStore()}connect(e){this.elem=e,this.updateElemAttrs()}updateElemAttrs(){this.elemAttrs.set({scroll:this.elem.scrollLeft,size:this.elem.clientWidth})}openDocument(e,l,t=!1){this.documentIds.update(s=>s.includes(e)?s:[...s.slice(0,l),e,...t?s.slice(l):[]])}scrollToDocument(e){this.documentIds.update(l=>{if(l.includes(e)){const t=l.findIndex(s=>s==e);this.scrollTo(t)}return l})}closeDocument(e){this.documentIds.update(l=>{if(l.includes(e)){const t=l.findIndex(s=>s==e);return[...l.slice(0,t),...l.slice(t+1)]}return l})}scrollTo(e){this.elem.scrollTo({left:e*this.viewerWidth+e*40})}makeViewerPropsStore(){return Ee([this.elemAttrs,this.documentIds],([{scroll:e,size:l},t])=>{const s=this.viewerWidth,n=t.length,o=40;return t.map((r,f)=>{const d=je(f,s,l,e);return{style:`width: ${s}px; max-width: ${s}px; left:${f*o}px ;right:${-s+o*(n-f)}px;`,documentId:r,overlapped:d<s,collapsed:d<=2*o,column:f}})})}}function ve(a,e,l){const t=a.slice();t[10]=e[l],t[14]=l;const s=t[10].documentId;t[11]=s;const n=t[1].getTitle(t[11]);return t[12]=n,t}function Xe(a){let e,l,t,s={ctx:a,current:null,token:null,hasCatch:!0,pending:lt,then:tt,catch:xe,value:15,error:16,blocks:[,,,]};return oe(l=a[1].load(a[11]),s),{c(){e=M(),s.block.c()},l(n){e=M(),s.block.l(n)},m(n,o){I(n,e,o),s.block.m(n,s.anchor=o),s.mount=()=>e.parentNode,s.anchor=e,t=!0},p(n,o){a=n,s.ctx=a,o&18&&l!==(l=a[1].load(a[11]))&&oe(l,s)||Ce(s,a,o)},i(n){t||(k(s.block),t=!0)},o(n){for(let o=0;o<3;o+=1){const r=s.blocks[o];y(r)}t=!1},d(n){n&&h(e),s.block.d(n),s.token=null,s=null}}}function Ye(a){let e,l;return e=new _e({props:{views:me,document:a[1].get(a[11])}}),{c(){T(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,s){S(e,t,s),l=!0},p(t,s){const n={};s&18&&(n.document=t[1].get(t[11])),e.$set(n)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function xe(a){let e,l,t,s;return t=new He({props:{$$slots:{default:[et]},$$scope:{ctx:a}}}),{c(){e=g("p"),l=O("An error occured while loading this document: "),T(t.$$.fragment)},l(n){e=w(n,"P",{});var o=b(e);l=W(o,"An error occured while loading this document: "),P(t.$$.fragment,o),o.forEach(h)},m(n,o){I(n,e,o),p(e,l),S(t,e,null),s=!0},p(n,o){const r={};o&131090&&(r.$$scope={dirty:o,ctx:n}),t.$set(r)},i(n){s||(k(t.$$.fragment,n),s=!0)},o(n){y(t.$$.fragment,n),s=!1},d(n){n&&h(e),C(t)}}}function et(a){let e=a[11]+"",l,t,s=JSON.stringify(a[16])+"",n;return{c(){l=O(e),t=O(", "),n=O(s)},l(o){l=W(o,e),t=W(o,", "),n=W(o,s)},m(o,r){I(o,l,r),I(o,t,r),I(o,n,r)},p(o,r){r&16&&e!==(e=o[11]+"")&&ae(l,e),r&18&&s!==(s=JSON.stringify(o[16])+"")&&ae(n,s)},d(o){o&&h(l),o&&h(t),o&&h(n)}}}function tt(a){let e,l,t,s;return l=new _e({props:{document:a[15],views:me}}),{c(){e=g("div"),T(l.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var o=b(e);P(l.$$.fragment,o),o.forEach(h),this.h()},h(){v(e,"class","loadeddocument")},m(n,o){I(n,e,o),S(l,e,null),s=!0},p(n,o){const r={};o&18&&(r.document=n[15]),l.$set(r)},i(n){s||(k(l.$$.fragment,n),t||ie(()=>{t=ce(e,de,{duration:80}),t.start()}),s=!0)},o(n){y(l.$$.fragment,n),s=!1},d(n){n&&h(e),C(l)}}}function lt(a){let e,l,t;return{c(){e=g("p"),l=O("Loading")},l(s){e=w(s,"P",{});var n=b(e);l=W(n,"Loading"),n.forEach(h)},m(s,n){I(s,e,n),p(e,l)},p:ue,i(s){t||ie(()=>{t=ce(e,de,{duration:2e3}),t.start()})},o:ue,d(s){s&&h(e)}}}function st(a){let e,l,t,s,n;const o=[Ye,Xe],r=[];function f(d,u){return u&18&&(e=null),e==null&&(e=!!d[1].hasDocument(d[11])),e?0:1}return l=f(a,-1),t=r[l]=o[l](a),{c(){t.c(),s=R()},l(d){t.l(d),s=j(d)},m(d,u){r[l].m(d,u),I(d,s,u),n=!0},p(d,u){let c=l;l=f(d,u),l===c?r[l].p(d,u):(le(),y(r[c],1,1,()=>{r[c]=null}),se(),t=r[l],t?t.p(d,u):(t=r[l]=o[l](d),t.c()),k(t,1),t.m(s.parentNode,s))},i(d){n||(k(t),n=!0)},o(d){y(t),n=!1},d(d){r[l].d(d),d&&h(s)}}}function pe(a,e){let l,t,s;const n=[e[10],{title:e[12]}];let o={$$slots:{default:[st]},$$scope:{ctx:e}};for(let r=0;r<n.length;r+=1)o=Pe(o,n[r]);return t=new Qe({props:o}),{key:a,first:null,c(){l=M(),T(t.$$.fragment),this.h()},l(r){l=M(),P(t.$$.fragment,r),this.h()},h(){this.first=l},m(r,f){I(r,l,f),S(t,r,f),s=!0},p(r,f){e=r;const d=f&18?De(n,[f&16&&Ve(e[10]),{title:e[12]}]):{};f&131090&&(d.$$scope={dirty:f,ctx:e}),t.$set(d)},i(r){s||(k(t.$$.fragment,r),s=!0)},o(r){y(t.$$.fragment,r),s=!1},d(r){r&&h(l),C(t,r)}}}function nt(a){let e,l,t=[],s=new Map,n,o,r,f=a[4];const d=u=>u[10].documentId;for(let u=0;u<f.length;u+=1){let c=ve(a,f,u),i=d(c);s.set(i,t[u]=pe(i,c))}return{c(){e=g("div"),l=g("div");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=w(u,"DIV",{class:!0});var c=b(e);l=w(c,"DIV",{class:!0,style:!0});var i=b(l);for(let m=0;m<t.length;m+=1)t[m].l(i);i.forEach(h),c.forEach(h),this.h()},h(){v(l,"class","inner viewers svelte-fi98vs"),te(l,"width",a[0]*a[4].length+"px"),v(e,"class","outer svelte-fi98vs")},m(u,c){I(u,e,c),p(e,l);for(let i=0;i<t.length;i+=1)t[i].m(l,null);a[9](e),n=!0,o||(r=[K(window,"resize",a[7]),K(e,"scroll",a[8])],o=!0)},p(u,[c]){c&18&&(f=u[4],le(),t=$e(t,c,d,1,u,f,s,l,Se,pe,null,ve),se()),(!n||c&17)&&te(l,"width",u[0]*u[4].length+"px")},i(u){if(!n){for(let c=0;c<f.length;c+=1)k(t[c]);n=!0}},o(u){for(let c=0;c<t.length;c+=1)y(t[c]);n=!1},d(u){u&&h(e);for(let c=0;c<t.length;c+=1)t[c].d();a[9](null),o=!1,Ae(r)}}}function rt(a,e,l){let t,{documentIds:s=[]}=e,{viewerwidth:n=700}=e,{loader:o}=e;const r=new Ze(s,n),f=r.viewerProps;Te(a,f,m=>l(4,t=m)),J(fe,r),J(qe,!0);let d;ne(()=>{r.connect(d)});const u=m=>r.updateElemAttrs(),c=m=>r.updateElemAttrs();function i(m){re[m?"unshift":"push"](()=>{d=m,l(3,d)})}return a.$$set=m=>{"documentIds"in m&&l(6,s=m.documentIds),"viewerwidth"in m&&l(0,n=m.viewerwidth),"loader"in m&&l(1,o=m.loader)},[n,o,r,d,t,f,s,u,c,i]}class ot extends F{constructor(e){super();G(this,e,rt,nt,B,{documentIds:6,viewerwidth:0,loader:1,viewcontrol:2})}get viewcontrol(){return this.$$.ctx[2]}}function at(a){if(window&&history){const e=new URLSearchParams;a.forEach(t=>{e.append("id",t)});const l=a.length>0?"?"+e.toString():"";history.pushState(null,"",l)}}function it(a){let e,l,t,s,n,o,r,f,d,u,c,i,m,$,D,L,U,H,N;document.title=e=he,s=new Fe({props:{viewcontrol:a[2],loader:a[1],isInteractive:!0}}),s.$on("resultSelected",a[3]);function ge(_){a[4](_)}let Q={documentIds:a[0],loader:a[1],viewerwidth:ze};return a[2]!==void 0&&(Q.viewcontrol=a[2]),r=new ot({props:Q}),re.push(()=>Oe(r,"viewcontrol",ge)),{c(){l=R(),t=g("div"),T(s.$$.fragment),n=R(),o=g("div"),T(r.$$.fragment),d=R(),u=g("div"),c=g("div"),i=g("p"),m=O("On a small screen, we recommend using the single-page viewer."),$=R(),D=g("a"),L=g("div"),U=O("Open in single-page viewer"),this.h()},l(_){We('[data-svelte="svelte-8a7s9"]',document.head).forEach(h),l=j(_),t=w(_,"DIV",{class:!0});var V=b(t);P(s.$$.fragment,V),n=j(V),o=w(V,"DIV",{class:!0});var A=b(o);P(r.$$.fragment,A),A.forEach(h),d=j(V),u=w(V,"DIV",{class:!0});var Z=b(u);c=w(Z,"DIV",{class:!0});var z=b(c);i=w(z,"P",{class:!0});var X=b(i);m=W(X,"On a small screen, we recommend using the single-page viewer."),X.forEach(h),$=j(z),D=w(z,"A",{href:!0});var Y=b(D);L=w(Y,"DIV",{class:!0});var x=b(L);U=W(x,"Open in single-page viewer"),x.forEach(h),Y.forEach(h),z.forEach(h),Z.forEach(h),V.forEach(h),this.h()},h(){v(o,"class","interactive flex-grow items-stretch overflow-auto hidden md:flex"),v(i,"class","text-center text-gray-700"),v(L,"class","border-bluegray-200 text-bluegray-500 items-stretch grow bg-bluegray-100 border-2 p-1 rounded-lg text-center mt-8 hover:border-bluegray-300 hover:text-bluegray-700 hover:bg-bluegray-200"),v(D,"href",H=a[1].getHref(a[0][0])),v(c,"class","max-w-sm m-auto mt-10"),v(u,"class","flex md:hidden items-center"),v(t,"class","flex flex-col lg:flex-row max-w-full wrapper svelte-j761q5")},m(_,E){I(_,l,E),I(_,t,E),S(s,t,null),p(t,n),p(t,o),S(r,o,null),p(t,d),p(t,u),p(u,c),p(c,i),p(i,m),p(c,$),p(c,D),p(D,L),p(L,U),N=!0},p(_,[E]){(!N||E&0)&&e!==(e=he)&&(document.title=e);const V={};E&4&&(V.viewcontrol=_[2]),E&2&&(V.loader=_[1]),s.$set(V);const A={};E&1&&(A.documentIds=_[0]),E&2&&(A.loader=_[1]),!f&&E&4&&(f=!0,A.viewcontrol=_[2],Le(()=>f=!1)),r.$set(A),(!N||E&3&&H!==(H=_[1].getHref(_[0][0])))&&v(D,"href",H)},i(_){N||(k(s.$$.fragment,_),k(r.$$.fragment,_),N=!0)},o(_){y(s.$$.fragment,_),y(r.$$.fragment,_),N=!1},d(_){_&&h(l),_&&h(t),C(s),C(r)}}}const ht=!0;async function _t({fetch:a,params:e}){console.log("Rendering INTERACTIVE");const{version:l}=e,t=[],s=new Ge(Ne,l);return s.fetch=a,s.attributes=await s.load("attributes"),await s.load("linktree"),{props:{loader:s,documentIds:t}}}function ct(a,e,l){let{documentIds:t}=e,{loader:s}=e;J(Je,s);let n;ne(()=>{let d=new URLSearchParams(window.location.search).getAll("id");d=d.length>0?d:[Me],n.documentIds.set(d),n.documentIds.subscribe(at)});function o({detail:f}){n.documentIds.set([f])}function r(f){n=f,l(2,n)}return a.$$set=f=>{"documentIds"in f&&l(0,t=f.documentIds),"loader"in f&&l(1,s=f.loader)},[t,s,n,o,r]}class vt extends F{constructor(e){super();G(this,e,ct,it,B,{documentIds:0,loader:1})}}export{vt as default,_t as load,ht as prerender};
